{% extends "base.html" %}

{% block title %}My Team - Noltrion{% endblock %}

{% block content %}
<div class="dashboard-wrapper">
    <!-- Header -->
    <div class="dashboard-header">
        <div class="d-flex justify-content-between align-items-center flex-wrap gap-4">
            <div>
                <h1 class="dashboard-title">My Team</h1>
                <p class="dashboard-subtitle">Connect and collaborate with your team members</p>
            </div>
            <div class="team-stats-mini">
                <div class="team-stat-badge">
                    <i class="fas fa-users"></i>
                    <span>{{ team_members|length if team_members else 0 }} Members</span>
                </div>
            </div>
        </div>
    </div>

    {% if team_members %}
    <!-- Team Members Cards - Enhanced Design -->
    <div class="team-grid">
        {% for member in team_members %}
        <div class="team-member-card">
            <div class="team-card-header">
                <!-- Profile Photo -->
                <div class="team-member-avatar">
                    {% if member.photo %}
                    <img src="{{ url_for('static', filename='uploads/photos/' + member.photo) }}" 
                         alt="{{ member.first_name }}" 
                         class="avatar-image">
                    {% else %}
                    <div class="avatar-placeholder">
                        {{ member.first_name[0] }}{{ member.last_name[0] if member.last_name else '' }}
                    </div>
                    {% endif %}
                    <div class="avatar-status-indicator"></div>
                </div>
            </div>

            <div class="team-card-body">
                <!-- Name -->
                <h3 class="team-member-name">{{ member.first_name }} {{ member.last_name }}</h3>
                
                <!-- Position/Team -->
                <div class="team-member-role">
                    <i class="fas fa-briefcase"></i>
                    <span>{{ member.position }}</span>
                </div>

                <!-- Department -->
                {% if member.department %}
                <div class="team-member-info">
                    <i class="fas fa-building"></i>
                    <span>{{ member.department }}</span>
                </div>
                {% endif %}

                <!-- Location -->
                {% if member.location %}
                <div class="team-member-info">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>{{ member.location }}</span>
                </div>
                {% endif %}
            </div>

            <div class="team-card-footer">
                <!-- Contact Information -->
                <div class="team-contact-actions">
                    {% if member.email %}
                    <a href="mailto:{{ member.email }}" class="team-contact-btn" title="Send Email">
                        <i class="fas fa-envelope"></i>
                    </a>
                    {% endif %}

                    {% if member.phone %}
                    <a href="tel:{{ member.phone }}" class="team-contact-btn" title="Call">
                        <i class="fas fa-phone"></i>
                    </a>
                    {% endif %}

                    <button class="team-contact-btn" title="View Profile" onclick="showMemberDetails('{{ member.id }}')">
                        <i class="fas fa-user"></i>
                    </button>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <!-- Empty State -->
    <div class="empty-state-container">
        <div class="empty-state-icon">
            <i class="fas fa-users"></i>
        </div>
        <h3 class="empty-state-title">No Team Members Found</h3>
        <p class="empty-state-text">You don't have any colleagues reporting to the same manager yet.</p>
        <a href="{{ url_for('dashboard') }}" class="btn btn-primary">
            <i class="fas fa-home"></i>
            Back to Dashboard
        </a>
    </div>
    {% endif %}
</div>

<script>
function showMemberDetails(memberId) {
    // Placeholder for future implementation
    alert('Member details view coming soon!');
}
</script>
{% endblock %}