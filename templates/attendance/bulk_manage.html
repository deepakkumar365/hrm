{% extends "base.html" %}

{% block title %}Bulk Attendance - Nexar{% endblock %}

{% block content %}
<div class="container-fluid">
    <!-- Header with search and actions -->
    <div class="row mb-1">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-start mb-2">
                <div>
                    <!-- Breadcrumb navigation -->
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb mb-0">
                            <li class="breadcrumb-item"><a href="{{ url_for('attendance_calendar') }}">Attendance</a></li>
                            <li class="breadcrumb-item active" aria-current="page">Bulk Attendance</li>
                        </ol>
                    </nav>
                </div>
                <div class="btn-group">
                    <a href="{{ url_for('attendance_list_view') }}" class="btn btn-outline-secondary">
                        <i class="fas fa-list me-1"></i>View Records
                    </a>
                </div>
            </div>

            <hr class="mt-0 mb-3">

            <!-- Date Selection and Actions -->
            <div class="card filter-card mb-4">
            <div class="card-header">
                <h6 class="mb-0">
                    <i class="fas fa-calendar-alt me-2"></i>Date Selection & Actions
                </h6>
            </div>
            <div class="card-body">
                <form method="GET" class="row g-3 align-items-end">
                    <div class="col-md-3">
                        <label for="date" class="form-label">Select Date</label>
                        <input type="date" id="date" name="date" class="form-control"
                               value="{{ selected_date }}" max="{{ date.today() }}" required>
                    </div>
                    <div class="col-md-2">
                        <button type="submit" class="btn btn-primary w-100">
                            <i class="fas fa-search me-1"></i>Load Date
                        </button>
                    </div>
                    <div class="col-md-4">
                        <div class="d-flex align-items-center date-info">
                            <div class="me-3">
                                <i class="fas fa-calendar-day text-primary fa-lg"></i>
                            </div>
                            <div>
                                <h6 class="mb-0">{{ filter_date.strftime('%B %d, %Y') }}</h6>
                                <small class="text-muted">{{ employees|length }} employee{{ 's' if employees|length != 1 else '' }} • {{ filter_date.strftime('%A') }}</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="d-flex gap-2 justify-content-end">
                            <button type="button" class="btn btn-outline-success btn-sm" onclick="selectAll(false)"
                                    title="Mark all employees as present">
                                <i class="fas fa-check-circle me-1"></i>All Present
                            </button>
                            <button type="button" class="btn btn-outline-danger btn-sm" onclick="selectAll(true)"
                                    title="Mark all employees as absent">
                                <i class="fas fa-times-circle me-1"></i>All Absent
                            </button>
                        </div>
                    </div>
                </form>

            </div>
        </div>

        <!-- Bulk Attendance Management Form -->
        <div class="card mb-4">
            <form method="POST">
                <input type="hidden" name="date" value="{{ selected_date }}">

                <div class="card-header" style="padding-top: 1rem; padding-bottom: 1rem;">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <h5 class="mb-0" style="font-weight: 600; font-size: 1rem;">
                            <i class="fas fa-users me-2"></i>Employee Attendance - {{ filter_date.strftime('%B %d, %Y') }}
                        </h5>
                    </div>

                    <!-- Quick Action Buttons -->
                    <div class="d-flex gap-2 flex-wrap">
                        <button type="button" class="btn btn-success btn-sm" onclick="markSelectedAs('present')"
                                title="Mark selected employees as present">
                            <i class="fas fa-check me-1"></i>Mark Selected Present
                        </button>
                        <button type="button" class="btn btn-danger btn-sm" onclick="markSelectedAs('absent')"
                                title="Mark selected employees as absent">
                            <i class="fas fa-times me-1"></i>Mark Selected Absent
                        </button>
                        <div class="ms-auto">
                            <button type="submit" class="btn btn-primary btn-sm"
                                    title="Save all attendance changes">
                                <i class="fas fa-save me-1"></i>Save Attendance
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card-body p-0">
                    {% if employees %}
                    <!-- Desktop Table -->
                    <div class="d-none d-md-block">
                        <div class="table-responsive-custom">
                            <table class="table table-hover table-striped bulk-attendance-table mb-0">
                                <thead class="table-header-bg">
                                    <tr>
                                        <th style="width: 50px;" class="text-center">
                                            <div class="form-check form-check-inline m-0">
                                                <input class="form-check-input select-all-checkbox" type="checkbox" id="selectAllCheckbox"
                                                       onchange="toggleSelectAll()" title="Select all employees">
                                            </div>
                                        </th>
                                        <th style="width: 120px;">Employee ID</th>
                                        <th style="width: 230px;">Employee Name</th>
                                        <th style="width: 150px;">Department</th>
                                        <th style="width: 150px;">Designation</th>
                                        <th style="width: 150px;">Status</th>
                                        <th style="width: 100px;" class="text-center">LOP</th>
                                        <th style="width: 80px;" class="text-center">Hours</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for employee in employees %}
                                    {% set attendance = attendance_records[employee.id] %}
                                    <tr class="attendance-row" data-employee-id="{{ employee.id }}">
                                        <td class="text-center">
                                            <div class="form-check form-check-inline m-0">
                                                <input class="form-check-input employee-checkbox"
                                                       type="checkbox"
                                                       name="absent_employees"
                                                       value="{{ employee.id }}"
                                                       id="emp_{{ employee.id }}"
                                                       onchange="updateSelectionCount(); updateSelectAllCheckbox();">
                                            </div>
                                        </td>
                                        <td>
                                            {{ employee.employee_id }}
                                        </td>
                                        <td>
                                            {{ employee.first_name }} {{ employee.last_name }}
                                        </td>
                                        <td><small>{{ employee.department or '-' }}</small></td>
                                        <td><small>{{ employee.designation.name if employee.designation else '-' }}</small></td>
                                        <td>
                                            <select class="form-select form-select-sm status-select"
                                                    name="status_{{ employee.id }}"
                                                    onchange="updateLOPDisplay(this, {{ employee.id }})">
                                                <option value="Pending" {% if not attendance or attendance.status == 'Pending' %}selected{% endif %}>Pending</option>
                                                <option value="Present" {% if attendance and attendance.status == 'Present' %}selected{% endif %}>Present</option>
                                                <option value="Absent" {% if attendance and attendance.status == 'Absent' %}selected{% endif %}>Absent</option>
                                                <option value="Leave" {% if attendance and attendance.status == 'Leave' %}selected{% endif %}>Leave</option>
                                                <option value="Half Day" {% if attendance and attendance.status == 'Half Day' %}selected{% endif %}>Half Day</option>
                                            </select>
                                        </td>
                                        <td class="text-center">
                                            <div class="form-check form-check-inline m-0">
                                                <input type="checkbox" class="form-check-input lop-checkbox"
                                                       name="lop_{{ employee.id }}"
                                                       id="lop_{{ employee.id }}"
                                                       {% if attendance and attendance.lop %}checked{% endif %}
                                                       {% if not attendance or attendance.status != 'Absent' %}disabled{% endif %}>
                                            </div>
                                        </td>
                                        <td class="text-center">
                                            {% if attendance %}
                                                {% if attendance.status == 'Present' %}
                                                    <span class="text-success"><strong>{{ attendance.total_hours or 8 }}h</strong></span>
                                                {% elif attendance.status == 'Half Day' %}
                                                    <span class="text-info"><strong>{{ attendance.total_hours or 4 }}h</strong></span>
                                                {% else %}
                                                    <span class="text-muted">—</span>
                                                {% endif %}
                                            {% else %}
                                                <span class="text-muted">—</span>
                                            {% endif %}
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Mobile Cards -->
                    <div class="d-md-none">
                        {% for employee in employees %}
                        {% set attendance = attendance_records[employee.id] %}
                        <div class="card mb-2 attendance-card" data-employee-id="{{ employee.id }}">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-start mb-2">
                                    <div class="flex-grow-1">
                                        <h6 class="mb-1">{{ employee.first_name }} {{ employee.last_name }}</h6>
                                        <p class="text-muted small mb-1">{{ employee.employee_id }}</p>
                                        <p class="mb-1"><small>{{ employee.department or '-' }}</small></p>
                                        <p class="mb-1"><small>{{ employee.designation.name if employee.designation else '-' }}</small></p>
                                        <div class="mt-2">
                                            <select class="form-select form-select-sm status-select"
                                                    name="status_{{ employee.id }}"
                                                    onchange="updateLOPDisplay(this, {{ employee.id }})">
                                                <option value="Pending" {% if not attendance or attendance.status == 'Pending' %}selected{% endif %}>Pending</option>
                                                <option value="Present" {% if attendance and attendance.status == 'Present' %}selected{% endif %}>Present</option>
                                                <option value="Absent" {% if attendance and attendance.status == 'Absent' %}selected{% endif %}>Absent</option>
                                                <option value="Leave" {% if attendance and attendance.status == 'Leave' %}selected{% endif %}>Leave</option>
                                                <option value="Half Day" {% if attendance and attendance.status == 'Half Day' %}selected{% endif %}>Half Day</option>
                                            </select>
                                            <div class="mt-2">
                                                <label class="form-check-label">
                                                    <input type="checkbox" class="form-check-input lop-checkbox"
                                                           name="lop_{{ employee.id }}"
                                                           id="lop_mobile_{{ employee.id }}"
                                                           {% if attendance and attendance.lop %}checked{% endif %}
                                                           {% if not attendance or attendance.status != 'Absent' %}disabled{% endif %}>
                                                    Mark as LOP
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="form-check m-0">
                                            <input class="form-check-input employee-checkbox"
                                                   type="checkbox"
                                                   name="absent_employees"
                                                   value="{{ employee.id }}"
                                                   id="emp_mobile_{{ employee.id }}"
                                                   onchange="updateSelectionCount(); updateSelectAllCheckbox();">
                                        </div>
                                    </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    {% else %}
                    <div class="text-center py-5">
                        <i class="fas fa-users fa-3x text-muted mb-3"></i>
                        <h5 class="text-muted">No employees found</h5>
                        <p class="text-muted">No active employees available for attendance management</p>
                    </div>
                    {% endif %}
                </div>

                {% if employees %}
                <div class="card-footer">
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="text-muted">
                            <small>
                                <i class="fas fa-info-circle me-1"></i>
                                Changes will be saved for {{ filter_date.strftime('%B %d, %Y') }}
                            </small>
                        </div>
                        <button type="submit" class="btn btn-primary btn-sm">
                            <i class="fas fa-save me-1"></i>Update Attendance
                        </button>
                    </div>
                </div>
                {% endif %}
            </div>
            </form>
        </div>
        </div>
    </div>
</div>

<script>
// JavaScript for bulk selection functionality
function selectAll(absent) {
    // Get all checkboxes from both desktop and mobile views
    const desktopCheckboxes = document.querySelectorAll('.d-none.d-md-block .employee-checkbox');
    const mobileCheckboxes = document.querySelectorAll('.d-md-none .employee-checkbox');

    // Update desktop checkboxes
    desktopCheckboxes.forEach(checkbox => {
        checkbox.checked = absent;
    });

    // Update mobile checkboxes with same state
    mobileCheckboxes.forEach(checkbox => {
        checkbox.checked = absent;
    });

    // Update the select all checkbox state
    const selectAllCheckbox = document.getElementById('selectAllCheckbox');
    if (selectAllCheckbox) {
        selectAllCheckbox.checked = absent;
    }

    updateSelectionCount();
}

function toggleSelectAll() {
    const selectAllCheckbox = document.getElementById('selectAllCheckbox');
    if (!selectAllCheckbox) return;

    // Get all desktop checkboxes
    const desktopCheckboxes = document.querySelectorAll('.d-none.d-md-block .employee-checkbox');
    const mobileCheckboxes = document.querySelectorAll('.d-md-none .employee-checkbox');

    const shouldCheck = selectAllCheckbox.checked;

    // Update all desktop checkboxes
    desktopCheckboxes.forEach(checkbox => {
        checkbox.checked = shouldCheck;
    });

    // Update all mobile checkboxes
    mobileCheckboxes.forEach(checkbox => {
        checkbox.checked = shouldCheck;
    });

    updateSelectionCount();
}

function updateSelectAllCheckbox() {
    const desktopCheckboxes = document.querySelectorAll('.d-none.d-md-block .employee-checkbox');
    const selectAllCheckbox = document.getElementById('selectAllCheckbox');

    if (selectAllCheckbox && desktopCheckboxes.length > 0) {
        const checkedCount = Array.from(desktopCheckboxes).filter(cb => cb.checked).length;
        selectAllCheckbox.checked = checkedCount === desktopCheckboxes.length && checkedCount > 0;
        selectAllCheckbox.indeterminate = checkedCount > 0 && checkedCount < desktopCheckboxes.length;
    }
}

// Initialize event listeners
document.addEventListener('DOMContentLoaded', function() {
    // Get all checkboxes
    const desktopCheckboxes = document.querySelectorAll('.d-none.d-md-block .employee-checkbox');
    const mobileCheckboxes = document.querySelectorAll('.d-md-none .employee-checkbox');
    const allCheckboxes = document.querySelectorAll('.employee-checkbox');

    // Add change event listeners to all employee checkboxes
    allCheckboxes.forEach(checkbox => {
        checkbox.addEventListener('change', function() {
            // Keep desktop and mobile checkboxes in sync
            const employeeId = this.value;
            const otherCheckbox = Array.from(allCheckboxes).find(cb => cb !== this && cb.value === employeeId);
            if (otherCheckbox) {
                otherCheckbox.checked = this.checked;
            }

            updateSelectAllCheckbox();
            updateSelectionCount();
        });
    });

    // Initialize the select all checkbox state
    updateSelectAllCheckbox();
    updateSelectionCount();
});

// Update LOP display based on status dropdown
function updateLOPDisplay(selectElement, employeeId) {
    const status = selectElement.value;
    const lopCheckbox = document.getElementById(`lop_${employeeId}`);
    const lopCheckboxMobile = document.getElementById(`lop_mobile_${employeeId}`);

    if (lopCheckbox) {
        // Enable LOP only for Absent status
        if (status === 'Absent') {
            lopCheckbox.disabled = false;
        } else {
            lopCheckbox.disabled = true;
            lopCheckbox.checked = false;
        }
    }
    
    if (lopCheckboxMobile) {
        // Enable LOP only for Absent status (mobile)
        if (status === 'Absent') {
            lopCheckboxMobile.disabled = false;
        } else {
            lopCheckboxMobile.disabled = true;
            lopCheckboxMobile.checked = false;
        }
    }
}

// Update selection count display
function updateSelectionCount() {
    // Only count checkboxes from the visible table (desktop or mobile)
    // Get the visible container
    const desktopTable = document.querySelector('.d-none.d-md-block');
    const mobileContainer = document.querySelector('.d-md-none');
    
    let visibleCheckboxes = [];
    if (desktopTable && desktopTable.offsetParent !== null) {
        // Desktop is visible
        visibleCheckboxes = Array.from(desktopTable.querySelectorAll('.employee-checkbox:checked'));
    } else if (mobileContainer && mobileContainer.offsetParent !== null) {
        // Mobile is visible
        visibleCheckboxes = Array.from(mobileContainer.querySelectorAll('.employee-checkbox:checked'));
    }
    
    const count = visibleCheckboxes.length;

    // Update button text if it exists
    const markPresentBtn = document.querySelector('button[onclick*="markSelectedAs(\'present\')"]');
    const markAbsentBtn = document.querySelector('button[onclick*="markSelectedAs(\'absent\')"]');

    if (markPresentBtn) {
        markPresentBtn.textContent = count > 0 ? `Mark ${count} Selected as Present` : 'Mark Selected Present';
    }
    if (markAbsentBtn) {
        markAbsentBtn.textContent = count > 0 ? `Mark ${count} Selected as Absent` : 'Mark Selected Absent';
    }
}

// New function for bulk marking selected employees
function markSelectedAs(status) {
    // Only get checkboxes from the visible container
    const desktopTable = document.querySelector('.d-none.d-md-block');
    const mobileContainer = document.querySelector('.d-md-none');
    
    let selectedEmployees = [];
    if (desktopTable && desktopTable.offsetParent !== null) {
        // Desktop is visible
        selectedEmployees = Array.from(desktopTable.querySelectorAll('.employee-checkbox:checked'));
    } else if (mobileContainer && mobileContainer.offsetParent !== null) {
        // Mobile is visible
        selectedEmployees = Array.from(mobileContainer.querySelectorAll('.employee-checkbox:checked'));
    }

    // If no selection, show alert
    if (selectedEmployees.length === 0) {
        alert('Please select at least one employee first.\n\nTip: Check the checkbox next to employee names to select them.');
        return;
    }

    const statusText = status === 'present' ? 'Present' : 'Absent';
    const confirmMessage = `Are you sure you want to mark ${selectedEmployees.length} employee(s) as ${statusText}?`;

    if (confirm(confirmMessage)) {
        selectedEmployees.forEach(checkbox => {
            const employeeId = checkbox.value;
            const selectElement = document.querySelector(`select[name="status_${employeeId}"]`);

            if (status === 'present') {
                checkbox.checked = false; // Uncheck means Present
                if (selectElement) selectElement.value = 'Present';
            } else {
                checkbox.checked = true; // Check means Absent (keep checked)
                if (selectElement) selectElement.value = 'Absent';
            }
            updateRowStatus(checkbox);
        });
        updateSelectAllCheckbox();

        // Show success message
        showSuccessMessage(`Successfully marked ${selectedEmployees.length} employee(s) as ${statusText}`);
    }
}

// Function to show success message
function showSuccessMessage(message) {
    // Create alert element
    const alertDiv = document.createElement('div');
    alertDiv.className = 'alert alert-success alert-dismissible fade show position-fixed';
    alertDiv.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px;';
    alertDiv.innerHTML = `
        <i class="fas fa-check-circle me-2"></i>${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;

    // Add to body
    document.body.appendChild(alertDiv);

    // Auto-remove after 3 seconds
    setTimeout(() => {
        alertDiv.classList.remove('show');
        setTimeout(() => alertDiv.remove(), 150);
    }, 3000);
}
</script>

<style>

/* Font consistency across the page */
h5, h6, .card-header {
    font-family: 'Inter', sans-serif;
    font-weight: 600;
}

small,
td small,
.table td {
    font-family: 'Inter', sans-serif;
    font-size: 0.8875rem;
}

.table-header-bg th {
    font-weight: 600;
    font-size: 0.8875rem;
    font-family: 'Inter', sans-serif;
}

/* ===== FILTER CARD ===== */
.filter-card {
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05) !important;
}

.filter-card .card-header {
    background-color: #f0f9f7;
    border-bottom: 1px solid #dee2e6;
    padding: 1rem;
}

.filter-card .card-header h6 {
    color: var(--text-primary);
    font-size: 0.9375rem;
    font-weight: 600;
}

.filter-card .card-body {
    padding: 1.5rem;
}

.date-info {
    padding: 0.75rem 1rem;
    background: rgba(0, 128, 128, 0.04);
    border-radius: 0.5rem;
}

/* ===== TABLE STYLING ===== */
.table-responsive-custom {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
}

.bulk-attendance-table {
    font-size: 0.875rem;
    margin-bottom: 0;
}

.bulk-attendance-table thead {
    position: sticky;
    top: 0;
    z-index: 10;
}

.table-header-bg {
    background: #f8f9fa;
    border-bottom: 2px solid #dee2e6;
}

.table-header-bg th {
    background: #f8f9fa;
    border-bottom: 2px solid #dee2e6;
    color: var(--text-primary);
    font-weight: 600;
    font-size: 0.8125rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    padding: 0.875rem 0.75rem;
}

/* Zebra striping for better readability */
.bulk-attendance-table tbody tr {
    border-bottom: 1px solid var(--border-color);
    transition: background-color 0.2s ease;
}

.bulk-attendance-table tbody tr:nth-child(odd) {
    background-color: #ffffff;
}

.bulk-attendance-table tbody tr:nth-child(even) {
    background-color: #f8f9fa;
}

.bulk-attendance-table tbody tr:hover {
    background-color: rgba(0, 128, 128, 0.06);
}

.bulk-attendance-table td {
    padding: 0.875rem 0.75rem;
    vertical-align: middle;
    color: var(--text-primary);
}

/* Attendance row styling */
.attendance-row.table-danger {
    background-color: rgba(220, 53, 69, 0.1) !important;
}

.attendance-row.table-danger:nth-child(even) {
    background-color: rgba(220, 53, 69, 0.08) !important;
}

/* ===== CHECKBOX STYLING ===== */
.select-all-checkbox {
    width: 18px;
    height: 18px;
    margin: 0;
}

.form-check-input {
    width: 18px;
    height: 18px;
    margin: 0;
    cursor: pointer;
}

.form-check-input:checked {
    background-color: #008080;
    border-color: #008080;
}

.form-check-input:focus {
    border-color: #008080;
    box-shadow: 0 0 0 0.2rem rgba(0, 128, 128, 0.25);
}

.form-check-input:indeterminate {
    background-color: #008080;
    border-color: #008080;
}

/* ===== LOP CHECKBOX CENTERING ===== */
.form-check-inline {
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0;
}

.bulk-attendance-table td.text-center .form-check-inline {
    padding: 0;
}

.lop-checkbox {
    flex-shrink: 0;
}

/* ===== STATUS SELECT DROPDOWN ===== */
.status-select {
    border-radius: 4px;
    border: 1px solid #dee2e6;
    padding: 0.375rem 0.5rem;
    font-size: 0.875rem;
    font-family: var(--font-family);
    transition: all 0.2s ease;
    min-width: 120px;
}

.status-select:hover {
    border-color: #bbb;
}

.status-select:focus {
    outline: none;
    border-color: #008080;
    box-shadow: 0 0 0 0.2rem rgba(0, 128, 128, 0.25);
}

.status-select option {
    padding: 0.5rem;
}

.status-select option[value="Present"] {
    background: #d4edda;
    color: #155724;
}

.status-select option[value="Absent"] {
    background: #f8d7da;
    color: #721c24;
}

.status-select option[value="Leave"] {
    background: #fff3cd;
    color: #856404;
}

.status-select option[value="Half Day"] {
    background: #d1ecf1;
    color: #0c5460;
}

/* ===== STATUS BADGE ===== */
.status-badge {
    font-size: 0.75rem;
    padding: 0.35rem 0.5rem;
    font-weight: 600;
    letter-spacing: 0.025em;
}

/* ===== TEXT STYLING ===== */
.text-monospace {
    font-family: 'Courier New', monospace;
    letter-spacing: 0.5px;
}

/* ===== ATTENDANCE CARD (MOBILE) ===== */
.attendance-card {
    border: 1px solid var(--border-color);
    border-radius: 0.5rem;
    transition: all 0.2s ease;
}

.attendance-card:hover {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

/* ===== CARD HEADER & FOOTER ===== */
.card-header {
    background: #f8f9fa;
    border-bottom: 1px solid var(--border-color);
    padding: 1.25rem;
}

.card-header h6 {
    color: var(--text-primary);
    font-size: 0.9375rem;
    font-weight: 600;
}

.card-footer {
    background: #f8f9fa;
    border-top: 1px solid var(--border-color);
    padding: 1rem 1.25rem;
}

/* ===== BUTTON STYLING ===== */
.btn-sm {
    font-size: 0.8125rem;
    padding: 0.375rem 0.75rem;
}

/* ===== RESPONSIVE IMPROVEMENTS ===== */
@media (max-width: 991.98px) {
    .bulk-attendance-wrapper {
        padding: 1.5rem 1rem;
    }

    .table-header-bg th {
        padding: 0.75rem 0.5rem;
        font-size: 0.75rem;
    }

    .bulk-attendance-table td {
        padding: 0.75rem 0.5rem;
    }

    .status-select {
        min-width: 100px;
        padding: 0.25rem 0.5rem;
        font-size: 0.8125rem;
    }
}

@media (max-width: 768px) {
    .bulk-attendance-wrapper {
        padding: 1rem;
    }

    .d-flex.gap-2.justify-content-end {
        justify-content: center !important;
        gap: 0.5rem !important;
    }

    .d-flex.gap-1 {
        gap: 0.25rem !important;
    }

    .btn-sm {
        font-size: 0.75rem;
        padding: 0.25rem 0.5rem;
    }

    .filter-card .card-body {
        padding: 1rem;
    }

    .filter-card .card-header {
        padding: 1rem;
    }

    .d-none.d-md-block {
        display: none !important;
    }

    .d-md-none {
        display: block !important;
    }
}

@media (max-width: 576px) {
    .bulk-attendance-wrapper {
        padding: 0.75rem;
    }

    .page-header {
        margin-bottom: 1rem !important;
    }

    .filter-card .card-header h6 {
        font-size: 0.875rem;
    }

    .date-info {
        padding: 0.5rem 0.75rem;
    }

    .date-info i {
        font-size: 1rem !important;
    }
}
</style>
{% endblock %}
