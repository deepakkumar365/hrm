{% extends "base.html" %}

{% block title %}My Documents{% endblock %}

{% block head %}
{{ super() }}{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h1 class="h3 mb-0">My Documents</h1>
            <p class="text-muted mb-0">All your important documents in one place.</p>
        </div>
    </div>

    {% if documents %}
        <div class="document-grid">
            {% for doc in documents %}
                {% set card_class = 'bg-other' %}
                {% set icon_class = 'fa-file-alt' %}
                {% if doc.document_type == 'Offer Letter' %}
                    {% set card_class = 'bg-offer-letter' %}
                    {% set icon_class = 'fa-file-signature' %}
                {% elif doc.document_type == 'Appraisal Letter' %}
                    {% set card_class = 'bg-appraisal' %}
                    {% set icon_class = 'fa-chart-line' %}
                {% elif doc.document_type == 'Salary Slip' %}
                    {% set card_class = 'bg-salary-slip' %}
                    {% set icon_class = 'fa-file-invoice-dollar' %}
                {% endif %}

                <div class="document-card">
                    <div class="document-card-header {{ card_class }}">
                        <i class="fas {{ icon_class }} icon"></i>
                        <h5 class="mb-0 text-white">{{ doc.document_type }}</h5>
                    </div>
                    <div class="document-card-body">
                        {% if doc.document_type == 'Salary Slip' and doc.year and doc.month %}
                            <h6 class="card-title">{{ doc.year }}-{{ "%02d"|format(doc.month) }}</h6>
                            <p class="card-text text-muted">{{ doc.description or 'Salary Slip' }}</p>
                        {% else %}
                            <h6 class="card-title">{{ doc.description or doc.document_type }}</h6>
                        {% endif %}
                        <p class="card-text"><small class="text-muted">Issued: {{ doc.issue_date.strftime('%d %b %Y') }}</small></p>
                    </div>
                    <div class="document-card-footer">
                        <a href="{{ url_for('document_download', document_id=doc.id) }}" class="btn btn-sm btn-primary">
                            <i class="fas fa-download me-1"></i> Download
                        </a>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="empty-state">
            <i class="fas fa-folder-open fa-3x text-muted mb-3"></i>
            <h4 class="mb-2">No Documents Found</h4>
            <p class="text-muted">Your documents will appear here once they are uploaded by HR.</p>
        </div>
    {% endif %}
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
{% endblock %}